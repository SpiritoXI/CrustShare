# CrustShare

åŸºäº Crust Network å’Œ IPFS çš„å»ä¸­å¿ƒåŒ–æ–‡ä»¶å­˜å‚¨ä¸åˆ†äº«å¹³å°ã€‚

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Next.js](https://img.shields.io/badge/Next.js-14-black)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://www.typescriptlang.org/)

## é¡¹ç›®ä»‹ç»

CrustShare æ˜¯ä¸€ä¸ªå¼€æºçš„å»ä¸­å¿ƒåŒ–æ–‡ä»¶å­˜å‚¨å’Œåˆ†äº«å¹³å°ï¼Œåˆ©ç”¨ Crust Network å’Œ IPFS æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€æ°¸ä¹…ã€æ— éœ€æœåŠ¡å™¨çš„æ–‡ä»¶å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚

### æ ¸å¿ƒç‰¹æ€§

- **ğŸŒ å»ä¸­å¿ƒåŒ–å­˜å‚¨** - åŸºäº Crust Network å’Œ IPFSï¼Œæ•°æ®åˆ†å¸ƒå¼å­˜å‚¨ï¼Œæ°¸ä¹…ä¿å­˜
- **ğŸ–¼ï¸ å¤šåª’ä½“æ”¯æŒ** - æ”¯æŒå›¾ç‰‡é¢„è§ˆã€è§†é¢‘/éŸ³é¢‘åœ¨çº¿æ’­æ”¾
- **âš¡ æ™ºèƒ½ç½‘å…³** - è‡ªåŠ¨æµ‹è¯•å¤šä¸ª IPFS ç½‘å…³ï¼Œé€‰æ‹©æœ€ä¼˜èŠ‚ç‚¹åŠ é€Ÿè®¿é—®
- **ğŸ”’ å¯†ç ä¿æŠ¤** - åˆ†äº«é“¾æ¥å¯è®¾ç½®è®¿é—®å¯†ç ï¼Œä¿æŠ¤éšç§
- **ğŸ“ æ–‡ä»¶å¤¹ç®¡ç†** - æ”¯æŒåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œè½»æ¾ç»„ç»‡æ–‡ä»¶
- **ğŸ“¦ æ‰¹é‡æ“ä½œ** - æ‰¹é‡ç§»åŠ¨ã€å¤åˆ¶ã€åˆ é™¤æ–‡ä»¶ï¼Œæå‡æ•ˆç‡
- **ğŸ”— CID å¯¼å…¥** - æ”¯æŒå¯¼å…¥å·²æœ‰ IPFS CID åˆ°æ–‡ä»¶åº“
- **ğŸ“± å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºç­‰å„ç§è®¾å¤‡

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| [Next.js](https://nextjs.org/) | 14 | React å…¨æ ˆæ¡†æ¶ |
| [React](https://react.dev/) | 18 | UI ç»„ä»¶åº“ |
| [TypeScript](https://www.typescriptlang.org/) | 5 | ç±»å‹å®‰å…¨ |
| [Tailwind CSS](https://tailwindcss.com/) | 3 | åŸå­åŒ– CSS |
| [shadcn/ui](https://ui.shadcn.com/) | - | UI ç»„ä»¶åº“ |
| [Zustand](https://github.com/pmndrs/zustand) | 4 | çŠ¶æ€ç®¡ç† |
| [Framer Motion](https://www.framer.com/motion/) | 10 | åŠ¨ç”»æ•ˆæœ |

### åç«¯æœåŠ¡

| æœåŠ¡ | ç”¨é€” |
|------|------|
| [Upstash Redis](https://upstash.com/) | æ•°æ®æŒä¹…åŒ–å­˜å‚¨ |
| [Crust Network](https://crust.network/) | å»ä¸­å¿ƒåŒ–æ–‡ä»¶å­˜å‚¨ |
| [IPFS](https://ipfs.tech/) | åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ |

### éƒ¨ç½²å¹³å°

- [Cloudflare Pages](https://pages.cloudflare.com/) - æ¨èï¼Œå…¨çƒ CDN åŠ é€Ÿ
- [Vercel](https://vercel.com/) - å¿«é€Ÿéƒ¨ç½²ï¼Œè‡ªåŠ¨é¢„è§ˆ
- Docker - è‡ªæ‰˜ç®¡éƒ¨ç½²

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 20.x æˆ–æ›´é«˜ç‰ˆæœ¬
- pnpmï¼ˆæ¨èï¼‰æˆ– npm

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/crustshare.git
cd crustshare
```

### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
# æˆ– npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local`ï¼š

```env
# Upstash Redis
UPSTASH_URL=https://your-url.upstash.io
UPSTASH_TOKEN=your-token

# ç®¡ç†å‘˜å¯†ç ï¼ˆSHA256 å“ˆå¸Œï¼‰
ADMIN_PASSWORD_HASH=your-hash

# Crust Token
CRUST_TOKEN=your-token
```

ç”Ÿæˆå¯†ç å“ˆå¸Œï¼š

```bash
node -e "console.log(require('crypto').createHash('sha256').update('your-password').digest('hex'))"
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
# æˆ– npm run dev
```

è®¿é—® http://localhost:3000

## éƒ¨ç½²æŒ‡å—

æˆ‘ä»¬æä¾›å¤šç§éƒ¨ç½²æ–¹å¼ï¼Œè¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹éƒ¨ç½²æ–‡æ¡£ï¼š

ğŸ“– **[æŸ¥çœ‹å®Œæ•´éƒ¨ç½²æ–‡æ¡£ â†’](DEPLOY.md)**

### å¿«é€Ÿéƒ¨ç½²åˆ° Cloudflare Pages

1. Fork æœ¬ä»“åº“åˆ°æ‚¨çš„ GitHub è´¦å·
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com)
3. è¿›å…¥ **Pages** â†’ **Create a project**
4. è¿æ¥ GitHub ä»“åº“
5. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - Framework preset: `Next.js`
   - Build command: `npm run build`
   - Output directory: `dist`
6. æ·»åŠ ç¯å¢ƒå˜é‡
7. ç‚¹å‡» **Save and Deploy**

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒ [DEPLOY.md](DEPLOY.md)

## é¡¹ç›®ç»“æ„

```
crustshare/
â”œâ”€â”€ app/                          # Next.js åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ dashboard/               # æ–‡ä»¶ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ share/[cid]/             # æ–‡ä»¶åˆ†äº«é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                 # ç™»å½•é¡µ
â”‚   â””â”€â”€ globals.css              # å…¨å±€æ ·å¼
â”œâ”€â”€ components/                   # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ui/                      # shadcn/ui ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/               # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”œâ”€â”€ share/                   # åˆ†äº«é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ modals/                  # æ¨¡æ€æ¡†ç»„ä»¶
â”œâ”€â”€ hooks/                        # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ use-dashboard.ts         # ä»ªè¡¨æ¿é€»è¾‘
â”‚   â”œâ”€â”€ use-share-page.ts        # åˆ†äº«é¡µé€»è¾‘
â”‚   â”œâ”€â”€ use-file-operations.ts   # æ–‡ä»¶æ“ä½œ
â”‚   â”œâ”€â”€ use-folder-operations.ts # æ–‡ä»¶å¤¹æ“ä½œ
â”‚   â”œâ”€â”€ use-upload.ts            # æ–‡ä»¶ä¸Šä¼ 
â”‚   â””â”€â”€ use-gateway.ts           # ç½‘å…³ç®¡ç†
â”œâ”€â”€ lib/                          # å·¥å…·åº“
â”‚   â”œâ”€â”€ api.ts                   # API æœåŠ¡
â”‚   â”œâ”€â”€ config.ts                # é…ç½®
â”‚   â”œâ”€â”€ store.ts                 # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils.ts                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ security.ts              # å®‰å…¨å·¥å…·
â”‚   â””â”€â”€ error-handler.ts         # é”™è¯¯å¤„ç†
â”œâ”€â”€ functions/api/                # Cloudflare Functions
â”‚   â”œâ”€â”€ db_proxy.ts              # æ•°æ®åº“ä»£ç†
â”‚   â”œâ”€â”€ get_token.ts             # è·å–ä¸Šä¼ ä»¤ç‰Œ
â”‚   â””â”€â”€ verify-password.ts       # å¯†ç éªŒè¯
â”œâ”€â”€ types/                        # TypeScript ç±»å‹
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”œâ”€â”€ middleware.ts                 # ä¸­é—´ä»¶
â”œâ”€â”€ next.config.ts                # Next.js é…ç½®
â”œâ”€â”€ package.json                  # ä¾èµ–é…ç½®
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ DEPLOY.md                     # éƒ¨ç½²æ–‡æ¡£
â””â”€â”€ LICENSE.md                    # è®¸å¯è¯
```

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### æ–‡ä»¶ç®¡ç†

- **ä¸Šä¼ æ–‡ä»¶** - æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæœ€å¤§ 1GBï¼Œå®æ—¶è¿›åº¦æ˜¾ç¤º
- **æ–‡ä»¶åˆ—è¡¨** - åˆ—è¡¨/ç½‘æ ¼åŒè§†å›¾ï¼Œæ”¯æŒæ’åºå’Œç­›é€‰
- **æ–‡ä»¶æœç´¢** - æŒ‰æ–‡ä»¶åæˆ– CID å¿«é€Ÿæœç´¢
- **æ–‡ä»¶æ“ä½œ** - åˆ†äº«ã€ä¸‹è½½ã€é‡å‘½åã€ç§»åŠ¨ã€åˆ é™¤ã€å¤åˆ¶ CID
- **æ–‡ä»¶é¢„è§ˆ** - å›¾ç‰‡ç¯ç®±æŸ¥çœ‹ã€è§†é¢‘/éŸ³é¢‘åœ¨çº¿æ’­æ”¾

### æ–‡ä»¶å¤¹ç®¡ç†

- åˆ›å»ºã€é‡å‘½åã€åˆ é™¤æ–‡ä»¶å¤¹
- æ–‡ä»¶å¤¹æ ‘å½¢å¯¼èˆª
- æ–‡ä»¶æ‹–æ‹½åˆ°æ–‡ä»¶å¤¹

### æ‰¹é‡æ“ä½œ

- æ‰¹é‡é€‰æ‹©æ–‡ä»¶ï¼ˆæ”¯æŒ Shift å¤šé€‰ï¼‰
- æ‰¹é‡ç§»åŠ¨åˆ°æ–‡ä»¶å¤¹
- æ‰¹é‡å¤åˆ¶åˆ°æ–‡ä»¶å¤¹
- æ‰¹é‡åˆ é™¤

### ç½‘å…³ç®¡ç†

- è‡ªåŠ¨æµ‹è¯•å¤šä¸ª IPFS ç½‘å…³
- æ˜¾ç¤ºç½‘å…³å»¶è¿Ÿå’Œå¯ç”¨æ€§
- æ™ºèƒ½é€‰æ‹©æœ€ä¼˜ç½‘å…³
- æ”¯æŒæ·»åŠ è‡ªå®šä¹‰ç½‘å…³
- ç¼“å­˜æµ‹è¯•ç»“æœ

### åˆ†äº«åŠŸèƒ½

- ç”Ÿæˆåˆ†äº«é“¾æ¥
- è®¾ç½®è®¿é—®å¯†ç 
- è®¾ç½®è¿‡æœŸæ—¶é—´
- æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

## å¼€å‘æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»ºé¡¹ç›®
pnpm build

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ä»£ç æ£€æŸ¥
pnpm lint
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ç¼–å†™æ‰€æœ‰ä»£ç 
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- ä½¿ç”¨ Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–
- éµå¾ª React Hooks æœ€ä½³å®è·µ

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤é—®é¢˜
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

## æŠ€æœ¯äº®ç‚¹

### å®‰å…¨æ€§

- âœ… SHA-256 å¯†ç å“ˆå¸Œå­˜å‚¨
- âœ… CORS è·¨åŸŸé™åˆ¶
- âœ… è¾“å…¥éªŒè¯å’Œæ¶ˆæ¯’
- âœ… æ–‡ä»¶ç±»å‹ç™½åå•æ£€æŸ¥
- âœ… æ–‡ä»¶åå®‰å…¨æ£€æŸ¥ï¼ˆé˜²æ­¢è·¯å¾„éå†ï¼‰

### æ€§èƒ½ä¼˜åŒ–

- âš¡ ç½‘å…³å¹¶å‘æµ‹è¯•æ§åˆ¶
- âš¡ è¯·æ±‚ç»“æœç¼“å­˜
- âš¡ å›¾ç‰‡æ‡’åŠ è½½
- âš¡ ç»„ä»¶æŒ‰éœ€åŠ è½½
- âš¡ çŠ¶æ€ç®¡ç†ä¼˜åŒ–

### ä»£ç ç»„ç»‡

- ğŸ¯ è‡ªå®šä¹‰ Hooks åˆ†ç¦»ä¸šåŠ¡é€»è¾‘
- ğŸ¯ ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
- ğŸ¯ å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- ğŸ¯ æ¨¡å—åŒ–ç»„ä»¶è®¾è®¡

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### æäº¤ Issue

- æŠ¥å‘Š Bug
- æå‡ºæ–°åŠŸèƒ½å»ºè®®
- æ”¹è¿›æ–‡æ¡£

### æäº¤ Pull Request

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'feat: add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. åˆ›å»º Pull Request

## ç›¸å…³èµ„æº

- ğŸ“– [éƒ¨ç½²æ–‡æ¡£](DEPLOY.md) - è¯¦ç»†çš„éƒ¨ç½²æ•™ç¨‹
- ğŸ“„ [è®¸å¯è¯](LICENSE.md) - MIT è®¸å¯è¯è¯¦æƒ…
- ğŸ› [é—®é¢˜åé¦ˆ](../../issues) - æäº¤ Bug æŠ¥å‘Š
- ğŸ’¡ [åŠŸèƒ½å»ºè®®](../../discussions) - æå‡ºæ–°æƒ³æ³•

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [shadcn/ui](https://ui.shadcn.com/) - UI ç»„ä»¶åº“
- [Crust Network](https://crust.network/) - å»ä¸­å¿ƒåŒ–å­˜å‚¨
- [IPFS](https://ipfs.tech/) - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE.md) å¼€æºã€‚

```
MIT License

Copyright (c) 2024 CrustShare

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

å®Œæ•´è®¸å¯è¯å†…å®¹è¯·æŸ¥çœ‹ [LICENSE.md](LICENSE.md)

---

<p align="center">
  Made with â¤ï¸ by CrustShare Team
</p>
