# CrustShare

<p align="center">
  <img src="./public/icon-192x192.png" alt="CrustShare Logo" width="120">
</p>

<p align="center">
  åŸºäº Crust Network å’Œ IPFS çš„å»ä¸­å¿ƒåŒ–æ–‡ä»¶å­˜å‚¨ä¸åˆ†äº«å¹³å°
</p>

<p align="center">
  <a href="https://opensource.org/licenses/MIT">
    <img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT">
  </a>
  <a href="https://nextjs.org/">
    <img src="https://img.shields.io/badge/Next.js-14-black" alt="Next.js">
  </a>
  <a href="https://www.typescriptlang.org/">
    <img src="https://img.shields.io/badge/TypeScript-5.0-blue" alt="TypeScript">
  </a>
  <a href="https://tailwindcss.com/">
    <img src="https://img.shields.io/badge/Tailwind-3-38B2AC" alt="Tailwind CSS">
  </a>
</p>

---

## ç›®å½•

- [é¡¹ç›®ä»‹ç»](#é¡¹ç›®ä»‹ç»)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æ–‡æ¡£](#å¼€å‘æ–‡æ¡£)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## é¡¹ç›®ä»‹ç»

**CrustShare** æ˜¯ä¸€ä¸ªå¼€æºçš„å»ä¸­å¿ƒåŒ–æ–‡ä»¶å­˜å‚¨å’Œåˆ†äº«å¹³å°ï¼Œåˆ©ç”¨ [Crust Network](https://crust.network/) å’Œ [IPFS](https://ipfs.tech/) æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€æ°¸ä¹…ã€æ— éœ€æœåŠ¡å™¨çš„æ–‡ä»¶å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© CrustShareï¼Ÿ

- **æ°¸ä¹…å­˜å‚¨** - åŸºäº IPFS çš„å†…å®¹å¯»å€å’Œ Crust Network çš„æ¿€åŠ±æœºåˆ¶ï¼Œç¡®ä¿æ–‡ä»¶é•¿æœŸå¯ç”¨
- **å»ä¸­å¿ƒåŒ–** - æ— å•ç‚¹æ•…éšœï¼Œæ•°æ®åˆ†å¸ƒå¼å­˜å‚¨åœ¨å…¨çƒèŠ‚ç‚¹
- **éšç§ä¿æŠ¤** - ç«¯åˆ°ç«¯åŠ å¯†ï¼Œæ”¯æŒå¯†ç ä¿æŠ¤åˆ†äº«é“¾æ¥
- **å¼€æºå…è´¹** - å®Œå…¨å¼€æºï¼Œå¯è‡ªæ‰˜ç®¡ï¼Œæ— å¹³å°é”å®š

---

## æ ¸å¿ƒç‰¹æ€§

### æ–‡ä»¶ç®¡ç†
- ğŸ“ **æ–‡ä»¶å¤¹ç®¡ç†** - åˆ›å»ºã€é‡å‘½åã€åˆ é™¤æ–‡ä»¶å¤¹ï¼Œæ”¯æŒåµŒå¥—ç»“æ„
- ğŸ” **æ™ºèƒ½æœç´¢** - å¿«é€Ÿæœç´¢æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
- ğŸ“Š **æ‰¹é‡æ“ä½œ** - æ‰¹é‡ç§»åŠ¨ã€å¤åˆ¶ã€åˆ é™¤æ–‡ä»¶
- ğŸ·ï¸ **æ–‡ä»¶æ’åº** - æŒ‰åç§°ã€å¤§å°ã€æ—¥æœŸæ’åº

### æ–‡ä»¶ä¸Šä¼ 
- ğŸ“¤ **æ‹–æ‹½ä¸Šä¼ ** - æ”¯æŒæ‹–æ‹½æ–‡ä»¶åˆ°æµè§ˆå™¨ä¸Šä¼ 
- ğŸ“ˆ **è¿›åº¦æ˜¾ç¤º** - å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
- ğŸ”’ **å®‰å…¨æ£€æŸ¥** - æ–‡ä»¶åå®‰å…¨éªŒè¯ã€ç±»å‹æ£€æŸ¥
- âš¡ **æ•…éšœè½¬ç§»** - å¤šèŠ‚ç‚¹ä¸Šä¼ ï¼Œè‡ªåŠ¨åˆ‡æ¢å¯ç”¨èŠ‚ç‚¹

### æ–‡ä»¶é¢„è§ˆ
- ğŸ–¼ï¸ **å›¾ç‰‡é¢„è§ˆ** - æ”¯æŒ JPGã€PNGã€GIFã€WebPã€SVG ç­‰æ ¼å¼
- ğŸ“„ **æ–‡ä»¶ä¿¡æ¯** - æ˜¾ç¤º CIDã€å¤§å°ã€ä¸Šä¼ æ—¶é—´ç­‰å…ƒæ•°æ®

### åˆ†äº«åŠŸèƒ½
- ğŸ”— **é“¾æ¥åˆ†äº«** - ç”Ÿæˆå¯åˆ†äº«çš„é“¾æ¥
- ğŸ” **å¯†ç ä¿æŠ¤** - ä¸ºåˆ†äº«é“¾æ¥è®¾ç½®è®¿é—®å¯†ç 
- â° **è¿‡æœŸè®¾ç½®** - è®¾ç½®åˆ†äº«é“¾æ¥çš„æœ‰æ•ˆæœŸ
- ğŸŒ **å¤šç½‘å…³** - æ™ºèƒ½é€‰æ‹©æœ€ä¼˜ IPFS ç½‘å…³

### ç½‘å…³ç®¡ç†
- ğŸš€ **æ™ºèƒ½æ£€æµ‹** - è‡ªåŠ¨æµ‹è¯•ç½‘å…³å¯ç”¨æ€§å’Œå»¶è¿Ÿ
- ğŸŒ **å…¨çƒèŠ‚ç‚¹** - æ”¯æŒ 40+ ä¸ª IPFS å…¬å…±ç½‘å…³
- â­ **ä¼˜è´¨ä¿å­˜** - è‡ªåŠ¨ä¿å­˜è¿é€šæ€§å¥½çš„ç½‘å…³ä¼˜å…ˆä½¿ç”¨
- ğŸ“Š **å¥åº·è¯„åˆ†** - åŸºäºå»¶è¿Ÿå’ŒæˆåŠŸç‡çš„å¥åº·åº¦è¯„ä¼°

---

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| [Next.js](https://nextjs.org/) | 14 | React å…¨æ ˆæ¡†æ¶ï¼ŒApp Router |
| [React](https://react.dev/) | 18 | UI ç»„ä»¶åº“ |
| [TypeScript](https://www.typescriptlang.org/) | 5 | ç±»å‹å®‰å…¨ |
| [Tailwind CSS](https://tailwindcss.com/) | 3 | åŸå­åŒ– CSS |
| [shadcn/ui](https://ui.shadcn.com/) | - | åŸºç¡€ UI ç»„ä»¶ |
| [Zustand](https://github.com/pmndrs/zustand) | 4 | çŠ¶æ€ç®¡ç† |
| [TanStack Query](https://tanstack.com/query) | 5 | æœåŠ¡ç«¯çŠ¶æ€ç®¡ç† |
| [Framer Motion](https://www.framer.com/motion/) | 11 | åŠ¨ç”»æ•ˆæœ |

### åç«¯æœåŠ¡

| æœåŠ¡ | ç”¨é€” |
|------|------|
| [Upstash Redis](https://upstash.com/) | æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼ˆæ–‡ä»¶å…ƒæ•°æ®ã€åˆ†äº«é…ç½®ï¼‰ |
| [Crust Network](https://crust.network/) | å»ä¸­å¿ƒåŒ–æ–‡ä»¶å­˜å‚¨ |
| [IPFS](https://ipfs.tech/) | åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ |

### éƒ¨ç½²å¹³å°

- **[Cloudflare Pages](https://pages.cloudflare.com/)** - æ¨èï¼Œå…¨çƒ CDN åŠ é€Ÿ + è¾¹ç¼˜å‡½æ•°
- **[Vercel](https://vercel.com/)** - å¿«é€Ÿéƒ¨ç½²ï¼Œè‡ªåŠ¨é¢„è§ˆ
- **Docker** - è‡ªæ‰˜ç®¡éƒ¨ç½²

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 20.x
- **pnpm** >= 8.xï¼ˆæ¨èï¼‰æˆ– npm >= 10.x

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/crustshare.git
cd crustshare
```

### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local`ï¼Œå¡«å…¥ä»¥ä¸‹å¿…éœ€é…ç½®ï¼š

```env
# Upstash Redisï¼ˆå¿…éœ€ï¼‰
UPSTASH_URL=https://your-url.upstash.io
UPSTASH_TOKEN=your-token

# ç®¡ç†å‘˜å¯†ç  SHA256 å“ˆå¸Œï¼ˆå¿…éœ€ï¼‰
ADMIN_PASSWORD_HASH=your-hash

# Crust Tokenï¼ˆå¿…éœ€ï¼‰
CRUST_TOKEN=your-token
```

ç”Ÿæˆå¯†ç å“ˆå¸Œï¼š

```bash
node -e "console.log(require('crypto').createHash('sha256').update('your-password').digest('hex'))"
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

è®¿é—® http://localhost:3000

---

## é¡¹ç›®ç»“æ„

```
crustshare/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ dashboard/               # æ–‡ä»¶ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ share/[cid]/             # æ–‡ä»¶åˆ†äº«é¡µé¢
â”‚   â”œâ”€â”€ download/[cid]/          # æ–‡ä»¶ä¸‹è½½é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                 # ç™»å½•é¡µ
â”‚   â””â”€â”€ providers.tsx            # å…¨å±€ Provider
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                      # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/               # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”œâ”€â”€ share/                   # åˆ†äº«é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ modals/                  # æ¨¡æ€æ¡†ç»„ä»¶
â”œâ”€â”€ hooks/                        # è‡ªå®šä¹‰ React Hooks
â”‚   â”œâ”€â”€ use-upload.ts            # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”œâ”€â”€ use-file-operations.ts   # æ–‡ä»¶æ“ä½œ
â”‚   â”œâ”€â”€ use-folder-operations.ts # æ–‡ä»¶å¤¹æ“ä½œ
â”‚   â”œâ”€â”€ use-gateway.ts           # ç½‘å…³ç®¡ç†
â”‚   â””â”€â”€ use-share-page.ts        # åˆ†äº«é¡µé¢
â”œâ”€â”€ lib/                          # å·¥å…·åº“
â”‚   â”œâ”€â”€ api.ts                   # API æœåŠ¡
â”‚   â”œâ”€â”€ config.ts                # é…ç½®å¸¸é‡
â”‚   â”œâ”€â”€ store.ts                 # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ security.ts              # å®‰å…¨å·¥å…·
â”‚   â”œâ”€â”€ utils.ts                 # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ file-utils.ts            # æ–‡ä»¶ç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ cid-utils.ts             # CID å¤„ç†å·¥å…·
â”‚   â””â”€â”€ password-utils.ts        # å¯†ç å¤„ç†å·¥å…·
â”œâ”€â”€ types/                        # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ functions/api/                # Cloudflare Functions
â”œâ”€â”€ scripts/                      # è„šæœ¬å·¥å…·
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”œâ”€â”€ middleware.ts                 # Next.js ä¸­é—´ä»¶
â”œâ”€â”€ next.config.js                # Next.js é…ç½®
â””â”€â”€ package.json
```

---

## é…ç½®è¯´æ˜

### å¿…éœ€ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | è·å–æ–¹å¼ |
|--------|------|----------|
| `UPSTASH_URL` | Upstash Redis URL | [Upstash æ§åˆ¶å°](https://console.upstash.com/) |
| `UPSTASH_TOKEN` | Upstash REST API Token | [Upstash æ§åˆ¶å°](https://console.upstash.com/) |
| `ADMIN_PASSWORD_HASH` | ç®¡ç†å‘˜å¯†ç  SHA256 å“ˆå¸Œ | `node -e "console.log(require('crypto').createHash('sha256').update('å¯†ç ').digest('hex'))"` |
| `CRUST_TOKEN` | Crust Network API Token | [Crust Cloud](https://crustcloud.io/) |

### å¯é€‰ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `DEFAULT_PAGE_SIZE` | 20 | æ¯é¡µæ˜¾ç¤ºæ–‡ä»¶æ•° |
| `MAX_UPLOAD_SIZE` | 1073741824 (1GB) | ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆå­—èŠ‚ï¼‰ |
| `DEFAULT_SHARE_EXPIRY_DAYS` | 7 | åˆ†äº«é“¾æ¥é»˜è®¤è¿‡æœŸå¤©æ•° |

---

## éƒ¨ç½²æŒ‡å—

è¯¦ç»†éƒ¨ç½²æ–‡æ¡£è¯·æŸ¥çœ‹ [DEPLOY.md](./DEPLOY.md)

### Cloudflare Pages å¿«é€Ÿéƒ¨ç½²

1. Fork æœ¬ä»“åº“åˆ° GitHub
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com)
3. è¿›å…¥ **Pages** â†’ **Create a project**
4. è¿æ¥ GitHub ä»“åº“
5. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - Framework preset: `Next.js`
   - Build command: `npm run build`
   - Output directory: `dist`
6. æ·»åŠ ç¯å¢ƒå˜é‡
7. ç‚¹å‡» **Save and Deploy**

---

## å¼€å‘æ–‡æ¡£

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ **TypeScript** ä¸¥æ ¼æ¨¡å¼
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ + Hooks
- çŠ¶æ€ç®¡ç†ä½¿ç”¨ **Zustand**
- æ ·å¼ä½¿ç”¨ **Tailwind CSS**
- å›¾æ ‡ä½¿ç”¨ **Lucide React**

### ç›®å½•ç»„ç»‡åŸåˆ™

```
â”œâ”€â”€ ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç»„ï¼ˆdashboard/ã€share/ã€modals/ï¼‰
â”œâ”€â”€ Hooks æŒ‰ä¸šåŠ¡é€»è¾‘æ‹†åˆ†
â”œâ”€â”€ lib/ æŒ‰åŠŸèƒ½æ¨¡å—åŒ–ï¼ˆapiã€configã€utilsã€securityï¼‰
â”œâ”€â”€ ç±»å‹å®šä¹‰é›†ä¸­åœ¨ types/
â”œâ”€â”€ API è·¯ç”±åœ¨ functions/api/
```

### å‘½åè§„èŒƒ

- ç»„ä»¶ï¼šPascalCaseï¼ˆå¦‚ `FileList.tsx`ï¼‰
- Hooksï¼šcamelCase å‰ç¼€ useï¼ˆå¦‚ `useUpload.ts`ï¼‰
- å·¥å…·å‡½æ•°ï¼šcamelCaseï¼ˆå¦‚ `formatFileSize.ts`ï¼‰
- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆå¦‚ `API_ENDPOINTS`ï¼‰
- ç±»å‹ï¼šPascalCase åç¼€ Typeï¼ˆå¦‚ `FileRecord`ï¼‰

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤é—®é¢˜
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤ï¼‰
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'feat: add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. åˆ›å»º Pull Request

---

## è®¸å¯è¯

[MIT License](./LICENSE.md)

---

## è‡´è°¢

- [Crust Network](https://crust.network/) - å»ä¸­å¿ƒåŒ–å­˜å‚¨ç½‘ç»œ
- [IPFS](https://ipfs.tech/) - æ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿ
- [Upstash](https://upstash.com/) - Serverless Redis
- [shadcn/ui](https://ui.shadcn.com/) - ç²¾ç¾çš„ UI ç»„ä»¶

---

<p align="center">
  Made with â¤ï¸ by CrustShare Team
</p>
